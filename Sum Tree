class Solution {
  public:
  pair<bool, int> isSumTreeFast(Node* root){
      if(root == NULL){
          pair<bool,int> p = make_pair(true, 0);
          return p;
      }

      //leaf node
      if(root->left == NULL && root->right == NULL) {
          pair<bool,int> p = make_pair(true, root->data);
          return p;
      }
      
      pair<bool, int> leftSum = isSumTreeFast(root->left);
      pair<bool, int> rightSum = isSumTreeFast(root->right);
     
     bool left = leftSum.first;
     bool right = rightSum.first;
     
     bool cond = root->data == leftSum.second + rightSum.second;
     
     pair<bool, int> ans;
     
     if(left && right && cond){
         ans.first = true;
         ans.second = root->data +leftSum.second + rightSum.second;
     }
     else{
         ans.first = false;
     }
     return ans;
  }
    bool isSumTree(Node* root) {
        return isSumTreeFast(root).first;
    }
};
